
@if (Paging?.TotalPages >= 1)
{
    <div class="btn-group btn-group-sm">
        <button class="btn btn-outline-primary" @onclick="@(() => HandleClick(1))" disabled="@Disabled("back")">Top</button>
        <button class="btn btn-outline-primary" @onclick="@(() => HandleClick(Paging.Prev))" disabled="@Disabled("back")">Prev</button>
        <button class="btn btn-outline-primary" disabled>Page: @DispNofN</button>
        <button class="btn btn-outline-primary" @onclick="@(() => HandleClick(Paging.Next))" disabled="@Disabled("forward")">Next</button>
        <button class="btn btn-outline-primary" @onclick="@(() => HandleClick(Paging.TotalPages))" disabled="@Disabled("forward")">Last</button>
        @if (Paging.CurrentPage > 0)
        {
            <button class="btn btn-outline-primary" @onclick="@(() => HandleClick(-1))" disabled="@IsAllDisabled">All</button>
        }
        else
        {
            <button class="btn btn-outline-primary" @onclick="@(() => HandleClick(1))">Back</button>
        }
    </div>
}

@code {
    private string DispNofN => (Paging.CurrentPage > 0) ? $"{Paging.CurrentPage} of {Paging.TotalPages}" : "(All)";
    private bool IsAllDisabled => (Paging.TotalPages == 1 || Paging.TotalSize > 1000);

    [Parameter] public MyPagenationModel Paging { get; set; } = null!;
    [Parameter] public EventCallback<int> PageChanged { get; set; }

    private void HandleClick(int page)
    {
        if (page < 0 && Paging.CurrentPage > 0) // Switch to All
        {
            Paging.CurrentPage = -1;
        }
        else if (Paging.CurrentPage < 0) // Back from All
        {
            Paging.CurrentPage = page;
        }
        PageChanged.InvokeAsync(page);
    }
    private bool Disabled(string action)
    {
        if (Paging.CurrentPage < 0) return true;
        bool IsDisabled = false;
        if (action == "back" && Paging.CurrentPage == 1)
        {
            IsDisabled = true;
        }
        else if (action == "forward" && Paging.CurrentPage == Paging.TotalPages)
        {
            IsDisabled = true;
        }
        return IsDisabled;
    }
}